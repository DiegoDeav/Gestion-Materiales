<!-- Data table component with sorting and filtering capabilities -->
<div class="data-table-container">
  <div class="data-table-header">
    <h2>{{ tableTitle }}</h2>
    <button 
      *ngIf="createRoute"
      class="btn btn-primary" 
      mat-raised-button 
      color="primary" 
      [routerLink]="[createRoute]">
    <mat-icon>add</mat-icon> Crear Nuevo
  </button>
  </div>

  <div class="filters-container">
    <mat-form-field class="filter-field">
      <mat-label>Filtrar por Tipo</mat-label>
      <mat-select [(ngModel)]="filterType" (selectionChange)="onFilterByType()">
        <mat-option value="">Todos</mat-option>
        <mat-option *ngFor="let tipo of tipoOptions" [value]="tipo">
          {{tipo}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="filter-field">
      <mat-label>Filtrar por Fecha</mat-label>
      <input matInput [matDatepicker]="picker" [(ngModel)]="filterDate" (dateChange)="onFilterByDate()">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <mat-form-field class="filter-field">
      <mat-label>Filtrar por Ciudad</mat-label>
      <mat-select [(ngModel)]="filterCity" (selectionChange)="onFilterByCity()">
        <mat-option value="">Todas</mat-option>
        <mat-option *ngFor="let ciudad of ciudadOptions" [value]="ciudad">
          {{ciudad}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-button color="warn" (click)="onClearFilters()" *ngIf="filterType || filterDate || filterCity">
      <mat-icon>clear</mat-icon> Limpiar Filtros
    </button>
  </div>

  <table class="data-table">
  <thead>
    <tr>
      <th *ngFor="let col of columns">{{ col.header }}</th>
      <th *ngIf="actions">Acciones</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of data">
      <td *ngFor="let col of columns">
        {{ getCellValue(item, col) }}
      </td>
      <td *ngIf="actions" class="actions-column">
        <button class="edit-button" (click)="onEdit(item)">Edit</button>
        <button class="delete-button" (click)="onDelete(item)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>
</div>